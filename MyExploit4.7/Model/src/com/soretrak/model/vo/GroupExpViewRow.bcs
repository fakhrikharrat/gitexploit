//Groovy Scripts for com.soretrak.model.vo.GroupExpView

package com.soretrak.model.vo

import oracle.jbo.script.annotation.TransientValueExpression;

@TransientValueExpression(attributeName="tt")
def tt_ExpressionScript_Expression()
{
TripsView.min("TimeDepart")
}


@TransientValueExpression(attributeName="TimeEnd")
def TimeEnd_ExpressionScript_Expression()
{
nvl(TripsView.max("TimeReturn"),begin)
}


@TransientValueExpression(attributeName="TimeStart")
def TimeStart_ExpressionScript_Expression()
{
nvl(TripsView.min("TimeDepart"),begin)
}


@TransientValueExpression(attributeName="theoamp")
def theoamp_ExpressionScript_Expression()
{
(nvl(TimeEnd.hours,0) * 60 + nvl(TimeEnd.minutes,0) - nvl(TimeStart.hours,0) * 60 - nvl(TimeStart.minutes,0))/60
}


@TransientValueExpression(attributeName="nbretrips")
def nbretrips_ExpressionScript_Expression()
{
nvl(TripsView.count("TripId"),0)
}


@TransientValueExpression(attributeName="begin")
def begin_ExpressionScript_Expression()
{
adf.currentDate
}


@TransientValueExpression(attributeName="nbrehrelle")
def nbrehrelle_ExpressionScript_Expression()
{
nvl(TripsView.sum("tripsamp"),0)
}


@TransientValueExpression(attributeName="taxtrav")
def taxtrav_ExpressionScript_Expression()
{
nvl(nbrehrelle,0) * 100 / nvl((nvl(theoamp,0) + nvl(Amp,0)),0)
}


@TransientValueExpression(attributeName="ViewAttr")
def ViewAttr_ExpressionScript_Expression()
{
(TimeEnd - TimeStart)*24
}

