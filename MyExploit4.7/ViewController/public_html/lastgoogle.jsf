<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
    <af:document title="lastgoogle.jsf" id="d1">
        <af:messages id="m1"/>
        <af:form id="f1">
            <af:panelSplitter id="ps1" splitterPosition="400">
                <f:facet name="first">
                    <af:panelCollection id="pc1">
                        <f:facet name="menus"/>
                        <f:facet name="toolbar">
                            <af:toolbar id="t2">
                                <af:button text="button 1" id="b1">
                                    <af:clientListener type="click" method="removeLigne"/>
                                </af:button>
                            </af:toolbar>
                        </f:facet>
                        <af:table value="#{bindings.DrligneView1.collectionModel}" var="row"
                                  rows="#{bindings.DrligneView1.rangeSize}"
                                  emptyText="#{bindings.DrligneView1.viewable ? 'No data to display.' : 'Access Denied.'}"
                                  rowBandingInterval="0"
                                  selectedRowKeys="#{bindings.DrligneView1.collectionModel.selectedRow}"
                                  selectionListener="#{bindings.DrligneView1.collectionModel.makeCurrent}"
                                  rowSelection="single" fetchSize="#{bindings.DrligneView1.rangeSize}"
                                  filterModel="#{bindings.DrligneView1Query.queryDescriptor}" filterVisible="true"
                                  queryListener="#{bindings.DrligneView1Query.processQuery}" varStatus="vs" id="t1">
                            <af:column sortProperty="#{bindings.DrligneView1.hints.Denumli.name}" filterable="true"
                                       headerText="#{bindings.DrligneView1.hints.Denumli.label}" id="c1">
                                <af:outputText value="#{row.Denumli}"
                                               shortDesc="#{bindings.DrligneView1.hints.Denumli.tooltip}" id="ot1"/>
                            </af:column>
                            <af:column sortProperty="#{bindings.DrligneView1.hints.Denomli.name}" filterable="true"
                                       headerText="#{bindings.DrligneView1.hints.Denomli.label}" id="c2">
                                <af:outputText value="#{row.Denomli}"
                                               shortDesc="#{bindings.DrligneView1.hints.Denomli.tooltip}" id="ot2"/>
                            </af:column>
                            <af:column id="c3" width="100" align="center">
                                <af:panelGroupLayout id="pgl1">
                                    <af:button id="b2"
                                               action="#{backingBeanScope.JSClassBean.doDrawLigneStation}"
                                               clientComponent="true" icon="/resources/images/Maps.png"/>
                                    <af:button text="button 2" id="b3">
                                        <af:clientListener method="moveMarker" type="click"/>
                                    </af:button>
                                </af:panelGroupLayout>
                            </af:column>
                        </af:table>
                        <f:facet name="statusbar"/>
                    </af:panelCollection>
                </f:facet>
                <f:facet name="second">
                    <af:group id="g1">
                        <div id="map" xmlns="http://www.w3.org/1999/xhtml">Â </div>
                    </af:group>
                </f:facet>
            </af:panelSplitter>
        </af:form>
        <f:facet name="metaContainer">
            <af:resource type="javascript" source="https://maps.googleapis.com/maps/api/js?v=3.exp"/>
            <af:resource type="javascript" source="resources/js/data.js"/>
            <af:resource type="javascript" source="resources/js/soretrakgmap.js"/>            
            <af:resource type="javascript">
              var map;
              var array = [];
              var markers ;
              
// list other function
              function displayStationFromJson(stringValue,ligne) {
                  
 
                  removeLigne();
                  showLigne(ligne);
                   
                   
                  markers = JSON.parse(stringValue);
                  
                  var i, marker;
                  var infoWindow = new google.maps.InfoWindow();

                  var latlngbounds = new google.maps.LatLngBounds();
                  
                  var image = 'resources/images/arrival.jpg';
                  /*
                  for (i = 0;i &lt; markers.length;i++) {
                     
                      marker = new google.maps.Marker( {
                          position : new google.maps.LatLng(markers[i].l, markers[i].g), 
                          map : map, 
                          animation: google.maps.Animation.DROP,
                          title : markers[i].t,
                          icone : image
                      });

                      google.maps.event.addListener(marker, 'click', (function (marker, i) {
                          return function () {
                              infoWindow.setContent(markers[i].t);
                              infoWindow.open(map, marker);
                          }
                      })(marker, i));
                      
                      //Extend each marker's position in LatLngBounds object.
                     latlngbounds.extend(marker.position);
                    
                   array.push(marker);  
                  }
                //Get the boundaries of the Map.
                var bounds = new google.maps.LatLngBounds();
         
                //Center map and adjust Zoom based on the position of all markers.
                map.setCenter(latlngbounds.getCenter());
                map.fitBounds(latlngbounds);
                */
             
                showLigne(ligne);
                
            
                 
              }
              
              
               function moveMarker()  {
                   
                    var marker = new google.maps.Marker( {
                          position : new google.maps.LatLng(markers[0].l, markers[0].g), 
                          map : map 
                      });
                  
                   
                  counter = 0;
                  var i=0;
                  var pos;
                  interval = window.setInterval(function () {
                      counter++;
                      i++;
                      pos = new google.maps.LatLng(markers[i].l,  markers[i].g);
                      marker.setPosition(pos);
                      if (counter >= markers.length) {
                          window.clearInterval(interval);
                         
                      }
                  },
                  500);
                   
                
              
              }

            function removeLigne() {
                
               var i;
                  
                Path300.setMap(null);
                Path302.setMap(null);
                Path312.setMap(null);
                Path316.setMap(null);
                Path320.setMap(null);
                Path323.setMap(null);
                Path350.setMap(null);
                Path360.setMap(null);
                Path361.setMap(null);
                Path61.setMap(null);
                Path62.setMap(null);
                Path68.setMap(null);
                Path210.setMap(null);
                Path220.setMap(null);
                Path264.setMap(null);
                Path280.setMap(null);
                Path311.setMap(null);
                Path400.setMap(null);
                Path430.setMap(null);
                Path460.setMap(null);
                Path490.setMap(null);
                Path550.setMap(null);
                                    
                    
                    for (i = 0;i &lt; array.length;i++) {
                      array[i].setMap(null);
                    }
                }
                 
                 
             
                 
              function initialize(jsArray,ligne) {
                  var mapOptions = {
                      zoom : 8, center : new google.maps.LatLng(35, 10), mapTypeId : google.maps.MapTypeId.ROAD
                  };

                  map = new google.maps.Map(document.getElementById('map'), mapOptions);
                 displayStationFromJson(jsArray,ligne);
             }


   
              google.maps.event.addDomListener(window, 'load', initialize);
            </af:resource>
            
            
        </f:facet>
    </af:document>
    <!--oracle-jdev-comment:preferred-managed-bean-name:JSClassBean-->
</f:view>