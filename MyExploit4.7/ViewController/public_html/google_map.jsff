<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1" xmlns:pe="http://xmlns.oracle.com/adf/pageeditor"
          xmlns:cust="http://xmlns.oracle.com/adf/faces/customizable" xmlns:f="http://java.sun.com/jsf/core"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich" xmlns:trh="http://myfaces.apache.org/trinidad/html">
            <af:resource type="javascript" source="https://maps.googleapis.com/maps/api/js?v=3.exp"/>
            <af:resource type="javascript" source="resources/js/data.js"/>
            <af:resource type="javascript" source="resources/js/soretrakgmap.js"/>            
            <af:resource type="javascript">
              var map;
              var array = [];
              
              
// list other function
              function displayStationFromJson(stringValue,ligne) {
                  
 
                  removeLigne();
                  showLigne(ligne);
                   
                   
                  var markers = JSON.parse(stringValue);
                  
                  var i, marker;
                  var infoWindow = new google.maps.InfoWindow();

                  var latlngbounds = new google.maps.LatLngBounds();
                  
                  var image = 'resources/images/arrival.jpg';
                  
                  for (i = 0;i &lt; markers.length;i++) {
                     
                      marker = new google.maps.Marker( {
                          position : new google.maps.LatLng(markers[i].l, markers[i].g), 
                          map : map, 
                          animation: google.maps.Animation.DROP,
                          title : markers[i].t,
                          icone : image
                      });

                      google.maps.event.addListener(marker, 'click', (function (marker, i) {
                          return function () {
                              infoWindow.setContent(markers[i].t);
                              infoWindow.open(map, marker);
                          }
                      })(marker, i));
                      
                      //Extend each marker's position in LatLngBounds object.
                     latlngbounds.extend(marker.position);
                    
                   array.push(marker);  
                  }
                //Get the boundaries of the Map.
                var bounds = new google.maps.LatLngBounds();
         
                //Center map and adjust Zoom based on the position of all markers.
                map.setCenter(latlngbounds.getCenter());
                map.fitBounds(latlngbounds);
                
             
                showLigne(ligne);
                
                
                 
              }

            function removeLigne() {
                
               var i;
                  
                Path300.setMap(null);
                Path302.setMap(null);
                Path312.setMap(null);
                Path316.setMap(null);
                Path320.setMap(null);
                Path323.setMap(null);
                Path350.setMap(null);
                Path360.setMap(null);
                Path361.setMap(null);
                Path61.setMap(null);
                Path62.setMap(null);
                Path68.setMap(null);
                Path210.setMap(null);
                Path220.setMap(null);
                Path264.setMap(null);
                Path280.setMap(null);
                Path311.setMap(null);
                Path400.setMap(null);
                Path430.setMap(null);
                Path460.setMap(null);
                Path490.setMap(null);
                Path550.setMap(null);
                                    
                    
                    for (i = 0;i &lt; array.length;i++) {
                      array[i].setMap(null);
                    }
                }
                 
              function initialize() {
                  var mapOptions = {
                      zoom : 8, center : new google.maps.LatLng(35, 10), mapTypeId : google.maps.MapTypeId.ROAD
                  };

                  map = new google.maps.Map(document.getElementById('map'), mapOptions);

             }

            function openPopup() {
            var popup = AdfPage.PAGE.findComponentByAbsoluteId('p2');
            popup.show();
            
                     }
   
              google.maps.event.addDomListener(window, 'load', initialize);
            </af:resource>
    <af:panelBox text="PanelBox1" id="pb1">
        <f:facet name="toolbar">
            <af:button text="button 1" id="b1" action="#{backingBeanScope.JSClassBean.displayData}"/>
        </f:facet>
        <div id="map" style="width: 800px; height: 600px">
            &#160;
        </div>
    </af:panelBox>
    <af:inlineFrame source="" id="if1">
        <af:clientListener type="inlineFrameLoad" method="initialize"/>
    </af:inlineFrame>
    <!--oracle-jdev-comment:preferred-managed-bean-name:JSClassBean-->
</jsp:root>