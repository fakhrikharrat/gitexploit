<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:af="http://xmlns.oracle.com/adf/faces/rich"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">
  <c:set var="viewcontrollerBundle" value="#{adfBundle['com.soretrak.view.ViewControllerBundle']}"/>
  <af:panelGridLayout id="pgl1">
    <af:gridRow marginTop="5px" height="70%" id="gr1">
      <af:gridCell marginStart="5px" width="100%" marginEnd="5px" id="gc1" halign="stretch" valign="stretch">
        <af:panelBox text="#{viewcontrollerBundle.ListeMissions}" id="pb1">
          <f:facet name="toolbar">
            <af:panelGroupLayout id="pgl2">
              <af:button text="#{viewcontrollerBundle.NonIntegrer}"
                         disabled="#{!bindings.ExecuteWithParams.enabled}" id="b4"
                         action="#{backingBeanScope.AddMission.doListNonInteg}"/>
              <af:spacer width="10" height="10" id="s1"/>
              <af:button text="#{viewcontrollerBundle.Integrer}"
                         disabled="#{!bindings.ExecuteWithParams1.enabled}" id="b3"
                         action="#{backingBeanScope.AddMission.doListInteg}"/>
            </af:panelGroupLayout>
          </f:facet>
          <af:panelCollection id="pc1">
            <f:facet name="menus"/>
            <f:facet name="toolbar"/>
            <af:popup childCreation="deferred" autoCancel="disabled" id="p1">
              <af:dialog id="d1" title="Integration Mission au programme"
                         dialogListener="#{backingBeanScope.AddMission.onDialogIntegMiss}">
                <f:facet name="buttonBar"/>
                <af:activeOutputText value="Voulez vous intégrer la mission au programme de la journée en question ?" id="aot1"
                                     inlineStyle="font-size:16px;"/>
              </af:dialog>
            </af:popup>
            <af:table value="#{bindings.DrmissView1.collectionModel}" var="row" rows="#{bindings.DrmissView1.rangeSize}"
                      emptyText="#{bindings.DrmissView1.viewable ? 'No data to display.' : 'Access Denied.'}"
                      rowBandingInterval="0" selectedRowKeys="#{bindings.DrmissView1.collectionModel.selectedRow}"
                      selectionListener="#{bindings.DrmissView1.collectionModel.makeCurrent}" rowSelection="single"
                      fetchSize="#{bindings.DrmissView1.rangeSize}"
                      filterModel="#{bindings.DrmissView1Query.queryDescriptor}" filterVisible="true"
                      queryListener="#{bindings.DrmissView1Query.processQuery}" varStatus="vs" id="t1"
                      partialTriggers="::b1 :::b3 :::b4 b6 ::b7 ::b8">
              <af:column id="c10" width="20" align="center" rowHeader="true"/>
              <af:column sortProperty="#{bindings.DrmissView1.hints.DateMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.DateMiss.label}" id="c1" width="80" align="center">
                <f:facet name="filter">
                  <af:inputDate value="#{bindings.DrmissView1Query.queryDescriptor.filterConjunctionCriterion.criterionMap.DateMiss.value}"
                                id="id1">
                    <af:convertDateTime pattern="#{bindings.DrmissView1.hints.DateMiss.format}"/>
                  </af:inputDate>
                </f:facet>
                <af:selectOneChoice value="#{row.bindings.DateMiss.inputValue}" label="#{row.bindings.DateMiss.label}"
                                    required="#{bindings.DrmissView1.hints.DateMiss.mandatory}"
                                    shortDesc="#{bindings.DrmissView1.hints.DateMiss.tooltip}" readOnly="true"
                                    id="soc1">
                  <f:selectItems value="#{row.bindings.DateMiss.items}" id="si1"/>
                  <f:validator binding="#{row.bindings.DateMiss.validator}"/>
                </af:selectOneChoice>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.IdMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.IdMiss.label}" id="c2" width="50" align="center">
                <af:outputText value="#{row.IdMiss}" shortDesc="#{bindings.DrmissView1.hints.IdMiss.tooltip}" id="ot1">
                  <af:convertNumber groupingUsed="false" pattern="#{bindings.DrmissView1.hints.IdMiss.format}"/>
                </af:outputText>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.Idtymiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.Idtymiss.label}" id="c5" width="150">
                <af:selectOneChoice value="#{row.bindings.Idtymiss.inputValue}" label="#{row.bindings.Idtymiss.label}"
                                    required="#{bindings.DrmissView1.hints.Idtymiss.mandatory}"
                                    shortDesc="#{bindings.DrmissView1.hints.Idtymiss.tooltip}" readOnly="true"
                                    id="soc2">
                  <f:selectItems value="#{row.bindings.Idtymiss.items}" id="si2"/>
                  <f:validator binding="#{row.bindings.Idtymiss.validator}"/>
                </af:selectOneChoice>
              </af:column>
              <af:column id="c11" headerText="#{bindings.DrmissView1.hints.Denumli.label}" width="70" align="center"
                         rendered="false">
                <af:outputText value="#{row.Denumli}" shortDesc="#{bindings.DrmissView1.hints.Denumli.tooltip}"
                               id="ot6"/>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.HdepMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.HdepMiss.label}" id="c3" align="center" width="80">
                <f:facet name="filter">
                  <af:inputDate value="#{bindings.DrmissView1Query.queryDescriptor.filterConjunctionCriterion.criterionMap.HdepMiss.value}"
                                id="id2">
                    <af:convertDateTime pattern="#{bindings.DrmissView1.hints.HdepMiss.format}"/>
                  </af:inputDate>
                </f:facet>
                <af:outputText value="#{row.HdepMiss}" shortDesc="#{bindings.DrmissView1.hints.HdepMiss.tooltip}"
                               id="ot2">
                  <af:convertDateTime pattern="#{bindings.DrmissView1.hints.HdepMiss.format}"/>
                </af:outputText>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.HfinMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.HfinMiss.label}" id="c4" width="80" align="center">
                <f:facet name="filter">
                  <af:inputDate value="#{bindings.DrmissView1Query.queryDescriptor.filterConjunctionCriterion.criterionMap.HfinMiss.value}"
                                id="id3">
                    <af:convertDateTime pattern="#{bindings.DrmissView1.hints.HfinMiss.format}"/>
                  </af:inputDate>
                </f:facet>
                <af:outputText value="#{row.HfinMiss}" shortDesc="#{bindings.DrmissView1.hints.HfinMiss.tooltip}"
                               id="ot3">
                  <af:convertDateTime pattern="#{bindings.DrmissView1.hints.HfinMiss.format}"/>
                </af:outputText>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.LibMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.LibMiss.label}" id="c6" width="300">
                <af:outputText value="#{row.LibMiss}" shortDesc="#{bindings.DrmissView1.hints.LibMiss.tooltip}"
                               id="ot4"/>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.DistMiss.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.DistMiss.label}" id="c7" align="center" width="70">
                <af:outputText value="#{row.DistMiss}" shortDesc="#{bindings.DrmissView1.hints.DistMiss.tooltip}"
                               id="ot5">
                  <af:convertNumber groupingUsed="false" pattern="#{bindings.DrmissView1.hints.DistMiss.format}"/>
                </af:outputText>
              </af:column>
              <af:column sortProperty="#{bindings.DrmissView1.hints.Etat.name}" filterable="true" sortable="true"
                         headerText="#{bindings.DrmissView1.hints.Etat.label}" id="c8" align="center" width="100">
                <af:selectOneChoice value="#{row.bindings.Etat.inputValue}" label="#{row.bindings.Etat.label}"
                                    required="#{bindings.DrmissView1.hints.Etat.mandatory}"
                                    shortDesc="#{bindings.DrmissView1.hints.Etat.tooltip}" readOnly="true" id="soc3">
                  <f:selectItems value="#{row.bindings.Etat.items}" id="si3"/>
                  <f:validator binding="#{row.bindings.Etat.validator}"/>
                </af:selectOneChoice>
              </af:column>
              <af:column id="c9" headerText="#{viewcontrollerBundle.Integration}" align="center"
                         binding="#{backingBeanScope.AddMission.colInteg}" partialTriggers=":::b3 :::b4">
                <af:button text="updateIntegMiss"
                           disabled="#{!bindings.updateIntegMiss.enabled}" id="b6"
                           action="#{backingBeanScope.AddMission.doUpdateIntegMiss}" rendered="false"/>
                <af:button text="addMissPlan"
                           disabled="#{!bindings.addMissPlan.enabled}" id="b9"
                           action="#{backingBeanScope.AddMission.doAddMiss2Plan}" rendered="false"/>
                <af:button text="#{viewcontrollerBundle.Integration}" id="b5">
                  <af:showPopupBehavior popupId="::p1"/>
                </af:button>
              </af:column>
            </af:table>
            <f:facet name="statusbar"/>
            <f:facet name="secondaryToolbar">
              <af:toolbar id="t2">
                <af:button actionListener="#{bindings.CreateInsert.execute}" text="#{viewcontrollerBundle.Ajout}"
                           disabled="#{!bindings.CreateInsert.enabled}" id="b1" icon="/resources/images/new_ena.png"
                           action="go" binding="#{backingBeanScope.AddMission.badd}" partialTriggers="::b4 ::b3">
                  <af:setPropertyListener from="A" to="#{pageFlowScope.inputIU}" type="action"/>
                </af:button>
                <af:button text="#{viewcontrollerBundle.Modif}" id="b2" icon="/resources/images/edit_ena.png" action="go"
                           binding="#{backingBeanScope.AddMission.bmodif}" partialTriggers="::b4 ::b3">
                  <af:setPropertyListener from="M" to="#{pageFlowScope.inputIU}" type="action"/>
                </af:button>
                <af:button actionListener="#{bindings.Delete.execute}" text="#{viewcontrollerBundle.Delete}" id="b8" icon="/resources/images/delete_ena.png"
                           binding="#{backingBeanScope.AddMission.bdel}" partialTriggers="::b4 ::b3"/>
                <af:button text="Execute"
                           disabled="#{!bindings.Execute.enabled}" id="b7"
                           action="#{backingBeanScope.AddMission.doExecuteMiss}" rendered="false"/>
              </af:toolbar>
            </f:facet>
          </af:panelCollection>
        </af:panelBox>
      </af:gridCell>
    </af:gridRow>
    <af:gridRow marginTop="5px" height="30%" marginBottom="5px" id="gr2">
      <af:gridCell marginStart="5px" width="100%" marginEnd="5px" id="gc2"/>
    </af:gridRow>
  </af:panelGridLayout>
</ui:composition>
